generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "cockroachdb"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  email     String   @unique
  password  String
  createdAt DateTime @default(now())
}

model Blog {
  id           String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  title        String
  excerpt      String?
  content      String
  author       String   @default("Admin")
  category     String?
  cover_image  String?
  created_at   DateTime @default(now())
  featured     Boolean  @default(false)
  published    Boolean  @default(false)
  reading_time Int      @default(5)
  slug         String?  @unique
  tags         String[] @default([])
  updated_at   DateTime @updatedAt
}

model Testimonial {
  id          String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name        String
  designation String?
  company     String?
  image       String?
  message     String
  isApproved  Boolean  @default(false)
  created_at  DateTime @default(now())
  rating      Int      @default(5)
}

model ContactMessage {
  id            String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name          String
  email         String
  subject       String?
  message       String
  isRead        Boolean  @default(false)
  budget        String?
  created_at    DateTime @default(now())
  mobile        String?
  status        String   @default("pending")
  priority      String   @default("medium")
  notes         String?
  quotedPrice   String?
  paidAmount    String?
  paymentStatus String   @default("unpaid")
  updated_at    DateTime @default(now()) @updatedAt
}

model SEOMetadata {
  id              String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  pageRoute       String   @unique
  metaTitle       String
  metaDescription String
  keywords        String[] @default([])
  ogImage         String?
  ogType          String   @default("website")
  twitterCard     String   @default("summary_large_image")
  canonicalUrl    String?
  author          String?
  robots          String   @default("index, follow")
  structuredData  Json?
  lastUpdated     DateTime @default(now()) @updatedAt
}

model Project {
  id            String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  title         String
  slug          String   @unique
  description   String
  thumbnailUrl  String
  galleryImages String[] @default([])
  techStack     String[] @default([])
  liveUrl       String?
  repoUrl       String?
  category      String   // Enum-like: Web, App, AI, Design
  status        String   // Enum-like: Completed, InProgress, Maintenance
  isFeatured    Boolean  @default(false)
  priorityOrder Int      @default(0)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

model Service {
  id           String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  title        String
  description  String
  price        Float
  deliveryTime String
  icon         String   @default("Code")
  features     String[] @default([])
  status       String   @default("Active")
  priorityOrder Int     @default(0)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

model Invoice {
  id            String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  invoiceNumber String   @unique
  clientName    String
  clientEmail   String
  items         Json
  totalAmount   Float
  status        String   @default("Pending")
  date          DateTime @default(now())
  dueDate       DateTime
  metadata      Json?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

model Skill {
  id          String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name        String
  iconUrl     String?
  category    String   // e.g., "Frontend", "Backend", "Tools"
  proficiency Int      @default(0) // 0-100
  color       String?  // Custom glow color
  isFeatured  Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Experience {
  id          String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  company     String
  role        String
  startDate   DateTime
  endDate     DateTime?
  description String
  logoUrl     String?
  currentJob  Boolean  @default(false)
  order       Int      @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model ProfileSettings {
  id                 String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  fullName           String   @default("Admin")
  headline           String   @default("Full Stack Developer")
  bio                String   @default("I am a passionate developer.")
  avatarUrl          String   @default("")
  resumeUrl          String   @default("")
  isAvailableForWork Boolean  @default(true) // Controls the green dot on the main site
  socialLinks        Json?    // Store platform names and URLs: { github: "...", linkedin: "..." }
  contactEmail       String   @default("")
  whatsappNumber     String   @default("")
  updatedAt          DateTime @updatedAt
}

model AnalyticsData {
  id             String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  date           DateTime @unique @default(now()) @db.Date // Storing one record per day
  views          Int      @default(0)
  uniqueVisitors Int      @default(0)
  topCountry     String?
  deviceType     Json?    // E.g., { mobile: 50, desktop: 40, tablet: 10 }
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}

model Subscriber {
  id           String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  email        String   @unique
  subscribedAt DateTime @default(now())
  status       String   @default("Active") // Active or Unsubscribed
}

model SystemLog {
  id        String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  action    String
  details   String?
  timestamp DateTime @default(now())
}

